{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Labdhi Shah\\\\OneDrive\\\\Desktop\\\\Projects\\\\Bookishworld-master\\\\client\\\\src\\\\context\\\\ItemContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst itemContext = /*#__PURE__*/createContext();\n\n// creating custom provider\nfunction CustomItemContext({\n  children\n}) {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [itemsInCart, setItemsInCart] = useState(0);\n  const [totalPrice, setTotalPrice] = useState(0);\n\n  // useEffect to load all the vegetables\n  useEffect(() => {\n    // Fetch products from the backend and dispatch 'SET_PRODUCTS' action\n    const fetchData = async () => {\n      const response = await fetch(\"http://localhost:5000/api/books\");\n      const products = await response.json();\n      console.log(products);\n      setProducts(products);\n    };\n    fetchData();\n  }, []);\n  const addToCart = product => {\n    setTotalPrice(totalPrice + product.price);\n    setCart([...cart, product]);\n    setItemsInCart(itemsInCart + 1);\n  };\n  const removeFromCart = product => {\n    const index = cart.findIndex(prdt => prdt._id === product._id);\n    console.log(index);\n    if (index !== -1) {\n      // Item found in the cart\n      // Now you can remove it from the cart array\n      const updatedCart = [...cart];\n      updatedCart.splice(index, 1);\n      setTotalPrice(totalPrice - cart[index].price);\n      setCart(updatedCart);\n      setItemsInCart(itemsInCart - 1);\n    } else {\n      console.log(\"Item not found in the cart\");\n    }\n  };\n  return (\n    /*#__PURE__*/\n    // default provider\n    _jsxDEV(itemContext.Provider, {\n      value: {\n        products,\n        addToCart,\n        removeFromCart,\n        itemsInCart,\n        totalPrice\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this)\n  );\n}\n_s(CustomItemContext, \"fzcYcL82kq85tFPM45Zk9fpPWqE=\");\n_c = CustomItemContext;\nexport { itemContext };\nexport default CustomItemContext;\nvar _c;\n$RefreshReg$(_c, \"CustomItemContext\");","map":{"version":3,"names":["createContext","useEffect","useState","jsxDEV","_jsxDEV","itemContext","CustomItemContext","children","_s","products","setProducts","cart","setCart","itemsInCart","setItemsInCart","totalPrice","setTotalPrice","fetchData","response","fetch","json","console","log","addToCart","product","price","removeFromCart","index","findIndex","prdt","_id","updatedCart","splice","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Labdhi Shah/OneDrive/Desktop/Projects/Bookishworld-master/client/src/context/ItemContext.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\n\nconst itemContext = createContext();\n\n// creating custom provider\nfunction CustomItemContext({ children }) {\n    const [products, setProducts] = useState([]);\n    const [cart, setCart] = useState([]);\n    const [itemsInCart, setItemsInCart] = useState(0);\n    const [totalPrice, setTotalPrice] = useState(0);\n\n    // useEffect to load all the vegetables\n    useEffect(() => {\n        // Fetch products from the backend and dispatch 'SET_PRODUCTS' action\n        const fetchData = async () => {\n            const response = await fetch(\"http://localhost:5000/api/books\");\n            const products = await response.json();\n            console.log(products);\n            setProducts(products);\n        };\n\n        fetchData();\n    }, []);\n\n    const addToCart = (product) => {\n        setTotalPrice(totalPrice + product.price);\n        setCart([...cart, product]);\n        setItemsInCart(itemsInCart + 1);\n    };\n\n    const removeFromCart = (product) => {\n        const index = cart.findIndex((prdt) => prdt._id === product._id);\n        console.log(index);\n\n        if (index !== -1) {\n            // Item found in the cart\n            // Now you can remove it from the cart array\n            const updatedCart = [...cart];\n            updatedCart.splice(index, 1);\n            setTotalPrice(totalPrice - cart[index].price);\n            setCart(updatedCart);\n            setItemsInCart(itemsInCart - 1);\n        } else {\n            console.log(\"Item not found in the cart\");\n        }\n    };\n\n    return (\n        // default provider\n        <itemContext.Provider\n            value={{\n                products,\n                addToCart,\n                removeFromCart,\n                itemsInCart,\n                totalPrice,\n            }}\n        >\n            {children}\n        </itemContext.Provider>\n    );\n}\n\nexport { itemContext };\nexport default CustomItemContext;"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC;;AAEnC;AACA,SAASM,iBAAiBA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACrC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACS,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGZ,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACa,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,CAAC,CAAC;;EAE/C;EACAD,SAAS,CAAC,MAAM;IACZ;IACA,MAAMgB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,iCAAiC,CAAC;MAC/D,MAAMV,QAAQ,GAAG,MAAMS,QAAQ,CAACE,IAAI,CAAC,CAAC;MACtCC,OAAO,CAACC,GAAG,CAACb,QAAQ,CAAC;MACrBC,WAAW,CAACD,QAAQ,CAAC;IACzB,CAAC;IAEDQ,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,SAAS,GAAIC,OAAO,IAAK;IAC3BR,aAAa,CAACD,UAAU,GAAGS,OAAO,CAACC,KAAK,CAAC;IACzCb,OAAO,CAAC,CAAC,GAAGD,IAAI,EAAEa,OAAO,CAAC,CAAC;IAC3BV,cAAc,CAACD,WAAW,GAAG,CAAC,CAAC;EACnC,CAAC;EAED,MAAMa,cAAc,GAAIF,OAAO,IAAK;IAChC,MAAMG,KAAK,GAAGhB,IAAI,CAACiB,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACC,GAAG,KAAKN,OAAO,CAACM,GAAG,CAAC;IAChET,OAAO,CAACC,GAAG,CAACK,KAAK,CAAC;IAElB,IAAIA,KAAK,KAAK,CAAC,CAAC,EAAE;MACd;MACA;MACA,MAAMI,WAAW,GAAG,CAAC,GAAGpB,IAAI,CAAC;MAC7BoB,WAAW,CAACC,MAAM,CAACL,KAAK,EAAE,CAAC,CAAC;MAC5BX,aAAa,CAACD,UAAU,GAAGJ,IAAI,CAACgB,KAAK,CAAC,CAACF,KAAK,CAAC;MAC7Cb,OAAO,CAACmB,WAAW,CAAC;MACpBjB,cAAc,CAACD,WAAW,GAAG,CAAC,CAAC;IACnC,CAAC,MAAM;MACHQ,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;IAC7C;EACJ,CAAC;EAED;IAAA;IACI;IACAlB,OAAA,CAACC,WAAW,CAAC4B,QAAQ;MACjBC,KAAK,EAAE;QACHzB,QAAQ;QACRc,SAAS;QACTG,cAAc;QACdb,WAAW;QACXE;MACJ,CAAE;MAAAR,QAAA,EAEDA;IAAQ;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACS;EAAC;AAE/B;AAAC9B,EAAA,CAxDQF,iBAAiB;AAAAiC,EAAA,GAAjBjC,iBAAiB;AA0D1B,SAASD,WAAW;AACpB,eAAeC,iBAAiB;AAAC,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}